<!DOCTYPE html>

<!-- This is a comment -->

<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Citi Bike Imbalance</title>
		<script type="text/javascript" src="d3/d3.v3.js"></script>
		<link rel="stylesheet" type="text/css" href="style.css">
	</head>
	<body>
		<h1>Citi Bike Imbalances</h1>
		<p>This is a test for a new page for this project. This is not the official project page, just testing ground for a new D3 version of this project. To see the offical page for this project go <a href="http://juanfrans.com/CITI-BIKE-STATION-IMBALANCES">here</a> or <a href="http://spatialinformationdesignlab.org/projects.php?id=320">here</a>.</p>

		<h2>Test</h2>
		<p>This is a project we are currently working on at the <a href="spatialinformationdesignlab.org"> Spatial Information Design Lab</a>.</p>






		<script type="text/javascript">

		var dataset;
		var w = 670;
		var h = 1100;






		/*
		d3.csv("data/Oct_Balance_Hour.csv", function(data){
			dataset = data.map(function(d){
				return [d["name"], +d["latitude"], +d["longitude"]];
			})
			console.log(dataset[0]);
		});
		*/


		d3.csv("data/Oct_Balance_Hour.csv", function(data){
			dataset = data;
			console.log(dataset);

			/*d3.select("body").selectAll("div")
				.data(dataset)
				.enter()
				.append("div")
				.attr("class", "bar")
				.style("background-color", function(d){
					var color = Math.abs(d["AM_PK"]);
					return "rgb("+color+" , 100, 100)";
				});*/

			var svg = d3.select("body")
				.append("svg")
				.attr("width", w)
				.attr("height", h);

			var rectangles = svg.selectAll("rect")
				.data(dataset)
				.enter()
				.append("rect");

			var color_scale = d3.scale.linear()
				.domain([0, 200])
				.range([0.05, 1]);

			rectangles.attr("y", function(d,i){
				return 25+i*3-0.5;
				})
				.attr("x", 60+25)
				.attr("width", 24)
				.attr("height", 2)
				.attr("fill", function(d){
					var hour_value = d["6_AM"];
					if (hour_value > 0){
						return ("hsla(180, 100%, 100%,"+ color_scale(hour_value)+")")
					};
					else{
						return("hsla(24, 100%, 100%,"+ color_scale(hour_value)*(-1)+")")
					};
				});
		});









		</script>
		<svg width="50" height="50">
			<circle cx="25" cy="25" r="22" fill="blue" stroke="gray" stroke-width="2"/>
		</svg>
	</body>
</html>